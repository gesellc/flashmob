from pprint import pprint

import pytest


def test_example():
    assert "This" == "This"

import requests
import yaml

@pytest.mark.skip
def test_request():
    with open(r'config.yml') as file:
        config = yaml.load(file)
    print(config)

    api_key = config['k']
    api_secret = config['s']
    image_url = 'https://docs.imagga.com/static/images/docs/sample/japan-605234_1280.jpg'

    response = requests.get(
        'https://api.imagga.com/v2/tags?image_url=%s' % image_url,
        auth=(api_key, api_secret))

    assert response.status_code == 200
    assert response.json() == {'result': {'tags': [{'confidence': 74.7262115478516, 'tag': {'en': 'range'}}, {'confidence': 74.7206954956055, 'tag': {'en': 'mountain'}}, {'confidence': 56.7158126831055, 'tag': {'en': 'landscape'}}, {'confidence': 52.0157279968262, 'tag': {'en': 'mountains'}}, {'confidence': 43.43359375, 'tag': {'en': 'valley'}}, {'confidence': 40.4076881408691, 'tag': {'en': 'snow'}}, {'confidence': 37.0930252075195, 'tag': {'en': 'sky'}}, {'confidence': 36.1794738769531, 'tag': {'en': 'forest'}}, {'confidence': 32.620491027832, 'tag': {'en': 'canyon'}}, {'confidence': 31.0227203369141, 'tag': {'en': 'peak'}}, {'confidence': 29.4975547790527, 'tag': {'en': 'tree'}}, {'confidence': 28.9153327941895, 'tag': {'en': 'glacier'}}, {'confidence': 28.8693199157715, 'tag': {'en': 'highland'}}, {'confidence': 28.0894603729248, 'tag': {'en': 'park'}}, {'confidence': 28.0584278106689, 'tag': {'en': 'environment'}}, {'confidence': 27.9807891845703, 'tag': {'en': 'clouds'}}, {'confidence': 27.6590881347656, 'tag': {'en': 'trees'}}, {'confidence': 26.2398223876953, 'tag': {'en': 'scenery'}}, {'confidence': 25.7238502502441, 'tag': {'en': 'wilderness'}}, {'confidence': 25.4575042724609, 'tag': {'en': 'national'}}, {'confidence': 25.4307708740234, 'tag': {'en': 'travel'}}, {'confidence': 24.3771286010742, 'tag': {'en': 'lake'}}, {'confidence': 22.459602355957, 'tag': {'en': 'cloud'}}, {'confidence': 21.6370964050293, 'tag': {'en': 'ravine'}}, {'confidence': 20.8236312866211, 'tag': {'en': 'river'}}, {'confidence': 20.7104454040527, 'tag': {'en': 'outdoor'}}, {'confidence': 20.6928176879883, 'tag': {'en': 'tourism'}}, {'confidence': 20.2213516235352, 'tag': {'en': 'outdoors'}}, {'confidence': 20.0387878417969, 'tag': {'en': 'rock'}}, {'confidence': 19.9951915740967, 'tag': {'en': 'high'}}, {'confidence': 18.796459197998, 'tag': {'en': 'hill'}}, {'confidence': 18.6174583435059, 'tag': {'en': 'stone'}}, {'confidence': 18.4902687072754, 'tag': {'en': 'scenic'}}, {'confidence': 18.169038772583, 'tag': {'en': 'panorama'}}, {'confidence': 18.0738315582275, 'tag': {'en': 'water'}}, {'confidence': 18.0638084411621, 'tag': {'en': 'summer'}}, {'confidence': 17.4524574279785, 'tag': {'en': 'grass'}}, {'confidence': 17.3154010772705, 'tag': {'en': 'alp'}}, {'confidence': 16.6003246307373, 'tag': {'en': 'wild'}}, {'confidence': 15.4410791397095, 'tag': {'en': 'hiking'}}, {'confidence': 15.3681907653809, 'tag': {'en': 'winter'}}, {'confidence': 15.2620115280151, 'tag': {'en': 'natural depression'}}, {'confidence': 14.7239580154419, 'tag': {'en': 'ice'}}, {'confidence': 13.8201217651367, 'tag': {'en': 'sunny'}}, {'confidence': 13.591459274292, 'tag': {'en': 'rocky'}}, {'confidence': 13.2374238967896, 'tag': {'en': 'serene'}}, {'confidence': 12.4818162918091, 'tag': {'en': 'country'}}, {'confidence': 12.1370334625244, 'tag': {'en': 'cliff'}}, {'confidence': 12.0068044662476, 'tag': {'en': 'geological formation'}}, {'confidence': 11.8053112030029, 'tag': {'en': 'tranquil'}}, {'confidence': 11.7643260955811, 'tag': {'en': 'mount'}}, {'confidence': 11.6741886138916, 'tag': {'en': 'hills'}}, {'confidence': 11.4103174209595, 'tag': {'en': 'natural'}}, {'confidence': 11.2925844192505, 'tag': {'en': 'cloudy'}}, {'confidence': 11.2861051559448, 'tag': {'en': 'scene'}}, {'confidence': 11.0197696685791, 'tag': {'en': 'peaceful'}}, {'confidence': 10.6718215942383, 'tag': {'en': 'vacation'}}, {'confidence': 10.6405200958252, 'tag': {'en': 'majestic'}}, {'confidence': 10.3931703567505, 'tag': {'en': 'rocks'}}, {'confidence': 10.3367805480957, 'tag': {'en': 'sunshine'}}, {'confidence': 10.2374467849731, 'tag': {'en': 'spring'}}, {'confidence': 10.1873979568481, 'tag': {'en': 'top'}}, {'confidence': 10.1135873794556, 'tag': {'en': 'ecology'}}, {'confidence': 10.085186958313, 'tag': {'en': 'reflection'}}, {'confidence': 9.859694480896, 'tag': {'en': 'ridge'}}, {'confidence': 8.90179538726807, 'tag': {'en': 'highlands'}}, {'confidence': 8.89572334289551, 'tag': {'en': 'peaks'}}, {'confidence': 8.88359069824219, 'tag': {'en': 'sun'}}, {'confidence': 8.88012790679932, 'tag': {'en': 'altitude'}}, {'confidence': 8.83828258514404, 'tag': {'en': 'alpine'}}, {'confidence': 8.81401443481445, 'tag': {'en': 'autumn'}}, {'confidence': 8.79794502258301, 'tag': {'en': 'hike'}}, {'confidence': 8.78051376342773, 'tag': {'en': 'snowy'}}, {'confidence': 8.78024101257324, 'tag': {'en': 'stream'}}, {'confidence': 8.63770484924316, 'tag': {'en': 'cold'}}, {'confidence': 8.4454460144043, 'tag': {'en': 'destination'}}, {'confidence': 8.29446887969971, 'tag': {'en': 'pine'}}, {'confidence': 8.26028537750244, 'tag': {'en': 'calm'}}, {'confidence': 8.23568248748779, 'tag': {'en': 'land'}}, {'confidence': 7.87502527236938, 'tag': {'en': 'trekking'}}, {'confidence': 7.82591676712036, 'tag': {'en': 'landscapes'}}, {'confidence': 7.69329357147217, 'tag': {'en': 'bush'}}, {'confidence': 7.67260599136353, 'tag': {'en': 'scenics'}}, {'confidence': 7.61185026168823, 'tag': {'en': 'adventure'}}, {'confidence': 7.5929708480835, 'tag': {'en': 'conservation'}}, {'confidence': 7.55560970306396, 'tag': {'en': 'field'}}, {'confidence': 7.22953319549561, 'tag': {'en': 'horizon'}}, {'confidence': 7.14070987701416, 'tag': {'en': 'basin'}}, {'confidence': 7.03749561309814, 'tag': {'en': 'season'}}]}, 'status': {'text': '', 'type': 'success'}}


def detect_fire_on_image(param):
    api_response = call_api(param)
    confidence_of_tag_detection = get_tag_confidence(api_response, fire_tag)
    return confidence_of_tag_detection


@pytest.mark.xfail
def test_interface():

    noFire = 'https://docs.imagga.com/static/images/docs/sample/japan-605234_1280.jpg'
    assert detect_fire_on_image(noFire) == 0

    fire = 'https://images.unsplash.com/photo-1507019658682-2924f9dbd499?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80'
    assert detect_fire_on_image(fire) > 90

def call_api(image_url):
    with open(r'config.yml') as file:
        config = yaml.load(file)
    print(config)

    api_key = config['k']
    api_secret = config['s']

    response = requests.get(
        'https://api.imagga.com/v2/tags?image_url=%s' % image_url,
        auth=(api_key, api_secret))

    return response.json()


def test_call_api_interface():
    api_response = {'result': {'tags': [{'confidence': 74.7262115478516, 'tag': {'en': 'range'}}, {'confidence': 74.7206954956055, 'tag': {'en': 'mountain'}}, {'confidence': 56.7158126831055, 'tag': {'en': 'landscape'}}, {'confidence': 52.0157279968262, 'tag': {'en': 'mountains'}}, {'confidence': 43.43359375, 'tag': {'en': 'valley'}}, {'confidence': 40.4076881408691, 'tag': {'en': 'snow'}}, {'confidence': 37.0930252075195, 'tag': {'en': 'sky'}}, {'confidence': 36.1794738769531, 'tag': {'en': 'forest'}}, {'confidence': 32.620491027832, 'tag': {'en': 'canyon'}}, {'confidence': 31.0227203369141, 'tag': {'en': 'peak'}}, {'confidence': 29.4975547790527, 'tag': {'en': 'tree'}}, {'confidence': 28.9153327941895, 'tag': {'en': 'glacier'}}, {'confidence': 28.8693199157715, 'tag': {'en': 'highland'}}, {'confidence': 28.0894603729248, 'tag': {'en': 'park'}}, {'confidence': 28.0584278106689, 'tag': {'en': 'environment'}}, {'confidence': 27.9807891845703, 'tag': {'en': 'clouds'}}, {'confidence': 27.6590881347656, 'tag': {'en': 'trees'}}, {'confidence': 26.2398223876953, 'tag': {'en': 'scenery'}}, {'confidence': 25.7238502502441, 'tag': {'en': 'wilderness'}}, {'confidence': 25.4575042724609, 'tag': {'en': 'national'}}, {'confidence': 25.4307708740234, 'tag': {'en': 'travel'}}, {'confidence': 24.3771286010742, 'tag': {'en': 'lake'}}, {'confidence': 22.459602355957, 'tag': {'en': 'cloud'}}, {'confidence': 21.6370964050293, 'tag': {'en': 'ravine'}}, {'confidence': 20.8236312866211, 'tag': {'en': 'river'}}, {'confidence': 20.7104454040527, 'tag': {'en': 'outdoor'}}, {'confidence': 20.6928176879883, 'tag': {'en': 'tourism'}}, {'confidence': 20.2213516235352, 'tag': {'en': 'outdoors'}}, {'confidence': 20.0387878417969, 'tag': {'en': 'rock'}}, {'confidence': 19.9951915740967, 'tag': {'en': 'high'}}, {'confidence': 18.796459197998, 'tag': {'en': 'hill'}}, {'confidence': 18.6174583435059, 'tag': {'en': 'stone'}}, {'confidence': 18.4902687072754, 'tag': {'en': 'scenic'}}, {'confidence': 18.169038772583, 'tag': {'en': 'panorama'}}, {'confidence': 18.0738315582275, 'tag': {'en': 'water'}}, {'confidence': 18.0638084411621, 'tag': {'en': 'summer'}}, {'confidence': 17.4524574279785, 'tag': {'en': 'grass'}}, {'confidence': 17.3154010772705, 'tag': {'en': 'alp'}}, {'confidence': 16.6003246307373, 'tag': {'en': 'wild'}}, {'confidence': 15.4410791397095, 'tag': {'en': 'hiking'}}, {'confidence': 15.3681907653809, 'tag': {'en': 'winter'}}, {'confidence': 15.2620115280151, 'tag': {'en': 'natural depression'}}, {'confidence': 14.7239580154419, 'tag': {'en': 'ice'}}, {'confidence': 13.8201217651367, 'tag': {'en': 'sunny'}}, {'confidence': 13.591459274292, 'tag': {'en': 'rocky'}}, {'confidence': 13.2374238967896, 'tag': {'en': 'serene'}}, {'confidence': 12.4818162918091, 'tag': {'en': 'country'}}, {'confidence': 12.1370334625244, 'tag': {'en': 'cliff'}}, {'confidence': 12.0068044662476, 'tag': {'en': 'geological formation'}}, {'confidence': 11.8053112030029, 'tag': {'en': 'tranquil'}}, {'confidence': 11.7643260955811, 'tag': {'en': 'mount'}}, {'confidence': 11.6741886138916, 'tag': {'en': 'hills'}}, {'confidence': 11.4103174209595, 'tag': {'en': 'natural'}}, {'confidence': 11.2925844192505, 'tag': {'en': 'cloudy'}}, {'confidence': 11.2861051559448, 'tag': {'en': 'scene'}}, {'confidence': 11.0197696685791, 'tag': {'en': 'peaceful'}}, {'confidence': 10.6718215942383, 'tag': {'en': 'vacation'}}, {'confidence': 10.6405200958252, 'tag': {'en': 'majestic'}}, {'confidence': 10.3931703567505, 'tag': {'en': 'rocks'}}, {'confidence': 10.3367805480957, 'tag': {'en': 'sunshine'}}, {'confidence': 10.2374467849731, 'tag': {'en': 'spring'}}, {'confidence': 10.1873979568481, 'tag': {'en': 'top'}}, {'confidence': 10.1135873794556, 'tag': {'en': 'ecology'}}, {'confidence': 10.085186958313, 'tag': {'en': 'reflection'}}, {'confidence': 9.859694480896, 'tag': {'en': 'ridge'}}, {'confidence': 8.90179538726807, 'tag': {'en': 'highlands'}}, {'confidence': 8.89572334289551, 'tag': {'en': 'peaks'}}, {'confidence': 8.88359069824219, 'tag': {'en': 'sun'}}, {'confidence': 8.88012790679932, 'tag': {'en': 'altitude'}}, {'confidence': 8.83828258514404, 'tag': {'en': 'alpine'}}, {'confidence': 8.81401443481445, 'tag': {'en': 'autumn'}}, {'confidence': 8.79794502258301, 'tag': {'en': 'hike'}}, {'confidence': 8.78051376342773, 'tag': {'en': 'snowy'}}, {'confidence': 8.78024101257324, 'tag': {'en': 'stream'}}, {'confidence': 8.63770484924316, 'tag': {'en': 'cold'}}, {'confidence': 8.4454460144043, 'tag': {'en': 'destination'}}, {'confidence': 8.29446887969971, 'tag': {'en': 'pine'}}, {'confidence': 8.26028537750244, 'tag': {'en': 'calm'}}, {'confidence': 8.23568248748779, 'tag': {'en': 'land'}}, {'confidence': 7.87502527236938, 'tag': {'en': 'trekking'}}, {'confidence': 7.82591676712036, 'tag': {'en': 'landscapes'}}, {'confidence': 7.69329357147217, 'tag': {'en': 'bush'}}, {'confidence': 7.67260599136353, 'tag': {'en': 'scenics'}}, {'confidence': 7.61185026168823, 'tag': {'en': 'adventure'}}, {'confidence': 7.5929708480835, 'tag': {'en': 'conservation'}}, {'confidence': 7.55560970306396, 'tag': {'en': 'field'}}, {'confidence': 7.22953319549561, 'tag': {'en': 'horizon'}}, {'confidence': 7.14070987701416, 'tag': {'en': 'basin'}}, {'confidence': 7.03749561309814, 'tag': {'en': 'season'}}]}, 'status': {'text': '', 'type': 'success'}}

    assert call_api('https://docs.imagga.com/static/images/docs/sample/japan-605234_1280.jpg') == api_response

def test_get_tag_confidence_of_range():
    expected_confidence = 74.7262115478516
    api_response = {'result': {'tags': [{'confidence': 74.7262115478516, 'tag': {'en': 'range'}}, {'confidence': 74.7206954956055, 'tag': {'en': 'mountain'}}, {'confidence': 56.7158126831055, 'tag': {'en': 'landscape'}}, {'confidence': 52.0157279968262, 'tag': {'en': 'mountains'}}, {'confidence': 43.43359375, 'tag': {'en': 'valley'}}, {'confidence': 40.4076881408691, 'tag': {'en': 'snow'}}, {'confidence': 37.0930252075195, 'tag': {'en': 'sky'}}, {'confidence': 36.1794738769531, 'tag': {'en': 'forest'}}, {'confidence': 32.620491027832, 'tag': {'en': 'canyon'}}, {'confidence': 31.0227203369141, 'tag': {'en': 'peak'}}, {'confidence': 29.4975547790527, 'tag': {'en': 'tree'}}, {'confidence': 28.9153327941895, 'tag': {'en': 'glacier'}}, {'confidence': 28.8693199157715, 'tag': {'en': 'highland'}}, {'confidence': 28.0894603729248, 'tag': {'en': 'park'}}, {'confidence': 28.0584278106689, 'tag': {'en': 'environment'}}, {'confidence': 27.9807891845703, 'tag': {'en': 'clouds'}}, {'confidence': 27.6590881347656, 'tag': {'en': 'trees'}}, {'confidence': 26.2398223876953, 'tag': {'en': 'scenery'}}, {'confidence': 25.7238502502441, 'tag': {'en': 'wilderness'}}, {'confidence': 25.4575042724609, 'tag': {'en': 'national'}}, {'confidence': 25.4307708740234, 'tag': {'en': 'travel'}}, {'confidence': 24.3771286010742, 'tag': {'en': 'lake'}}, {'confidence': 22.459602355957, 'tag': {'en': 'cloud'}}, {'confidence': 21.6370964050293, 'tag': {'en': 'ravine'}}, {'confidence': 20.8236312866211, 'tag': {'en': 'river'}}, {'confidence': 20.7104454040527, 'tag': {'en': 'outdoor'}}, {'confidence': 20.6928176879883, 'tag': {'en': 'tourism'}}, {'confidence': 20.2213516235352, 'tag': {'en': 'outdoors'}}, {'confidence': 20.0387878417969, 'tag': {'en': 'rock'}}, {'confidence': 19.9951915740967, 'tag': {'en': 'high'}}, {'confidence': 18.796459197998, 'tag': {'en': 'hill'}}, {'confidence': 18.6174583435059, 'tag': {'en': 'stone'}}, {'confidence': 18.4902687072754, 'tag': {'en': 'scenic'}}, {'confidence': 18.169038772583, 'tag': {'en': 'panorama'}}, {'confidence': 18.0738315582275, 'tag': {'en': 'water'}}, {'confidence': 18.0638084411621, 'tag': {'en': 'summer'}}, {'confidence': 17.4524574279785, 'tag': {'en': 'grass'}}, {'confidence': 17.3154010772705, 'tag': {'en': 'alp'}}, {'confidence': 16.6003246307373, 'tag': {'en': 'wild'}}, {'confidence': 15.4410791397095, 'tag': {'en': 'hiking'}}, {'confidence': 15.3681907653809, 'tag': {'en': 'winter'}}, {'confidence': 15.2620115280151, 'tag': {'en': 'natural depression'}}, {'confidence': 14.7239580154419, 'tag': {'en': 'ice'}}, {'confidence': 13.8201217651367, 'tag': {'en': 'sunny'}}, {'confidence': 13.591459274292, 'tag': {'en': 'rocky'}}, {'confidence': 13.2374238967896, 'tag': {'en': 'serene'}}, {'confidence': 12.4818162918091, 'tag': {'en': 'country'}}, {'confidence': 12.1370334625244, 'tag': {'en': 'cliff'}}, {'confidence': 12.0068044662476, 'tag': {'en': 'geological formation'}}, {'confidence': 11.8053112030029, 'tag': {'en': 'tranquil'}}, {'confidence': 11.7643260955811, 'tag': {'en': 'mount'}}, {'confidence': 11.6741886138916, 'tag': {'en': 'hills'}}, {'confidence': 11.4103174209595, 'tag': {'en': 'natural'}}, {'confidence': 11.2925844192505, 'tag': {'en': 'cloudy'}}, {'confidence': 11.2861051559448, 'tag': {'en': 'scene'}}, {'confidence': 11.0197696685791, 'tag': {'en': 'peaceful'}}, {'confidence': 10.6718215942383, 'tag': {'en': 'vacation'}}, {'confidence': 10.6405200958252, 'tag': {'en': 'majestic'}}, {'confidence': 10.3931703567505, 'tag': {'en': 'rocks'}}, {'confidence': 10.3367805480957, 'tag': {'en': 'sunshine'}}, {'confidence': 10.2374467849731, 'tag': {'en': 'spring'}}, {'confidence': 10.1873979568481, 'tag': {'en': 'top'}}, {'confidence': 10.1135873794556, 'tag': {'en': 'ecology'}}, {'confidence': 10.085186958313, 'tag': {'en': 'reflection'}}, {'confidence': 9.859694480896, 'tag': {'en': 'ridge'}}, {'confidence': 8.90179538726807, 'tag': {'en': 'highlands'}}, {'confidence': 8.89572334289551, 'tag': {'en': 'peaks'}}, {'confidence': 8.88359069824219, 'tag': {'en': 'sun'}}, {'confidence': 8.88012790679932, 'tag': {'en': 'altitude'}}, {'confidence': 8.83828258514404, 'tag': {'en': 'alpine'}}, {'confidence': 8.81401443481445, 'tag': {'en': 'autumn'}}, {'confidence': 8.79794502258301, 'tag': {'en': 'hike'}}, {'confidence': 8.78051376342773, 'tag': {'en': 'snowy'}}, {'confidence': 8.78024101257324, 'tag': {'en': 'stream'}}, {'confidence': 8.63770484924316, 'tag': {'en': 'cold'}}, {'confidence': 8.4454460144043, 'tag': {'en': 'destination'}}, {'confidence': 8.29446887969971, 'tag': {'en': 'pine'}}, {'confidence': 8.26028537750244, 'tag': {'en': 'calm'}}, {'confidence': 8.23568248748779, 'tag': {'en': 'land'}}, {'confidence': 7.87502527236938, 'tag': {'en': 'trekking'}}, {'confidence': 7.82591676712036, 'tag': {'en': 'landscapes'}}, {'confidence': 7.69329357147217, 'tag': {'en': 'bush'}}, {'confidence': 7.67260599136353, 'tag': {'en': 'scenics'}}, {'confidence': 7.61185026168823, 'tag': {'en': 'adventure'}}, {'confidence': 7.5929708480835, 'tag': {'en': 'conservation'}}, {'confidence': 7.55560970306396, 'tag': {'en': 'field'}}, {'confidence': 7.22953319549561, 'tag': {'en': 'horizon'}}, {'confidence': 7.14070987701416, 'tag': {'en': 'basin'}}, {'confidence': 7.03749561309814, 'tag': {'en': 'season'}}]}, 'status': {'text': '', 'type': 'success'}}
    tag = 'range'

    assert expected_confidence == get_tag_confidence(api_response, tag)

def test_get_tag_confidence_of_mountain():
    expected_confidence = 74.7206954956055
    api_response = {'result': {'tags': [{'confidence': 74.7262115478516, 'tag': {'en': 'range'}}, {'confidence': 74.7206954956055, 'tag': {'en': 'mountain'}}, {'confidence': 56.7158126831055, 'tag': {'en': 'landscape'}}, {'confidence': 52.0157279968262, 'tag': {'en': 'mountains'}}, {'confidence': 43.43359375, 'tag': {'en': 'valley'}}, {'confidence': 40.4076881408691, 'tag': {'en': 'snow'}}, {'confidence': 37.0930252075195, 'tag': {'en': 'sky'}}, {'confidence': 36.1794738769531, 'tag': {'en': 'forest'}}, {'confidence': 32.620491027832, 'tag': {'en': 'canyon'}}, {'confidence': 31.0227203369141, 'tag': {'en': 'peak'}}, {'confidence': 29.4975547790527, 'tag': {'en': 'tree'}}, {'confidence': 28.9153327941895, 'tag': {'en': 'glacier'}}, {'confidence': 28.8693199157715, 'tag': {'en': 'highland'}}, {'confidence': 28.0894603729248, 'tag': {'en': 'park'}}, {'confidence': 28.0584278106689, 'tag': {'en': 'environment'}}, {'confidence': 27.9807891845703, 'tag': {'en': 'clouds'}}, {'confidence': 27.6590881347656, 'tag': {'en': 'trees'}}, {'confidence': 26.2398223876953, 'tag': {'en': 'scenery'}}, {'confidence': 25.7238502502441, 'tag': {'en': 'wilderness'}}, {'confidence': 25.4575042724609, 'tag': {'en': 'national'}}, {'confidence': 25.4307708740234, 'tag': {'en': 'travel'}}, {'confidence': 24.3771286010742, 'tag': {'en': 'lake'}}, {'confidence': 22.459602355957, 'tag': {'en': 'cloud'}}, {'confidence': 21.6370964050293, 'tag': {'en': 'ravine'}}, {'confidence': 20.8236312866211, 'tag': {'en': 'river'}}, {'confidence': 20.7104454040527, 'tag': {'en': 'outdoor'}}, {'confidence': 20.6928176879883, 'tag': {'en': 'tourism'}}, {'confidence': 20.2213516235352, 'tag': {'en': 'outdoors'}}, {'confidence': 20.0387878417969, 'tag': {'en': 'rock'}}, {'confidence': 19.9951915740967, 'tag': {'en': 'high'}}, {'confidence': 18.796459197998, 'tag': {'en': 'hill'}}, {'confidence': 18.6174583435059, 'tag': {'en': 'stone'}}, {'confidence': 18.4902687072754, 'tag': {'en': 'scenic'}}, {'confidence': 18.169038772583, 'tag': {'en': 'panorama'}}, {'confidence': 18.0738315582275, 'tag': {'en': 'water'}}, {'confidence': 18.0638084411621, 'tag': {'en': 'summer'}}, {'confidence': 17.4524574279785, 'tag': {'en': 'grass'}}, {'confidence': 17.3154010772705, 'tag': {'en': 'alp'}}, {'confidence': 16.6003246307373, 'tag': {'en': 'wild'}}, {'confidence': 15.4410791397095, 'tag': {'en': 'hiking'}}, {'confidence': 15.3681907653809, 'tag': {'en': 'winter'}}, {'confidence': 15.2620115280151, 'tag': {'en': 'natural depression'}}, {'confidence': 14.7239580154419, 'tag': {'en': 'ice'}}, {'confidence': 13.8201217651367, 'tag': {'en': 'sunny'}}, {'confidence': 13.591459274292, 'tag': {'en': 'rocky'}}, {'confidence': 13.2374238967896, 'tag': {'en': 'serene'}}, {'confidence': 12.4818162918091, 'tag': {'en': 'country'}}, {'confidence': 12.1370334625244, 'tag': {'en': 'cliff'}}, {'confidence': 12.0068044662476, 'tag': {'en': 'geological formation'}}, {'confidence': 11.8053112030029, 'tag': {'en': 'tranquil'}}, {'confidence': 11.7643260955811, 'tag': {'en': 'mount'}}, {'confidence': 11.6741886138916, 'tag': {'en': 'hills'}}, {'confidence': 11.4103174209595, 'tag': {'en': 'natural'}}, {'confidence': 11.2925844192505, 'tag': {'en': 'cloudy'}}, {'confidence': 11.2861051559448, 'tag': {'en': 'scene'}}, {'confidence': 11.0197696685791, 'tag': {'en': 'peaceful'}}, {'confidence': 10.6718215942383, 'tag': {'en': 'vacation'}}, {'confidence': 10.6405200958252, 'tag': {'en': 'majestic'}}, {'confidence': 10.3931703567505, 'tag': {'en': 'rocks'}}, {'confidence': 10.3367805480957, 'tag': {'en': 'sunshine'}}, {'confidence': 10.2374467849731, 'tag': {'en': 'spring'}}, {'confidence': 10.1873979568481, 'tag': {'en': 'top'}}, {'confidence': 10.1135873794556, 'tag': {'en': 'ecology'}}, {'confidence': 10.085186958313, 'tag': {'en': 'reflection'}}, {'confidence': 9.859694480896, 'tag': {'en': 'ridge'}}, {'confidence': 8.90179538726807, 'tag': {'en': 'highlands'}}, {'confidence': 8.89572334289551, 'tag': {'en': 'peaks'}}, {'confidence': 8.88359069824219, 'tag': {'en': 'sun'}}, {'confidence': 8.88012790679932, 'tag': {'en': 'altitude'}}, {'confidence': 8.83828258514404, 'tag': {'en': 'alpine'}}, {'confidence': 8.81401443481445, 'tag': {'en': 'autumn'}}, {'confidence': 8.79794502258301, 'tag': {'en': 'hike'}}, {'confidence': 8.78051376342773, 'tag': {'en': 'snowy'}}, {'confidence': 8.78024101257324, 'tag': {'en': 'stream'}}, {'confidence': 8.63770484924316, 'tag': {'en': 'cold'}}, {'confidence': 8.4454460144043, 'tag': {'en': 'destination'}}, {'confidence': 8.29446887969971, 'tag': {'en': 'pine'}}, {'confidence': 8.26028537750244, 'tag': {'en': 'calm'}}, {'confidence': 8.23568248748779, 'tag': {'en': 'land'}}, {'confidence': 7.87502527236938, 'tag': {'en': 'trekking'}}, {'confidence': 7.82591676712036, 'tag': {'en': 'landscapes'}}, {'confidence': 7.69329357147217, 'tag': {'en': 'bush'}}, {'confidence': 7.67260599136353, 'tag': {'en': 'scenics'}}, {'confidence': 7.61185026168823, 'tag': {'en': 'adventure'}}, {'confidence': 7.5929708480835, 'tag': {'en': 'conservation'}}, {'confidence': 7.55560970306396, 'tag': {'en': 'field'}}, {'confidence': 7.22953319549561, 'tag': {'en': 'horizon'}}, {'confidence': 7.14070987701416, 'tag': {'en': 'basin'}}, {'confidence': 7.03749561309814, 'tag': {'en': 'season'}}]}, 'status': {'text': '', 'type': 'success'}}
    tag = 'mountain'

    assert expected_confidence == get_tag_confidence(api_response, tag)

def test_get_tag_confidence_of_fire():
    expected_confidence = 0
    api_response = {'result': {'tags': [{'confidence': 74.7262115478516, 'tag': {'en': 'range'}}, {'confidence': 74.7206954956055, 'tag': {'en': 'mountain'}}, {'confidence': 56.7158126831055, 'tag': {'en': 'landscape'}}, {'confidence': 52.0157279968262, 'tag': {'en': 'mountains'}}, {'confidence': 43.43359375, 'tag': {'en': 'valley'}}, {'confidence': 40.4076881408691, 'tag': {'en': 'snow'}}, {'confidence': 37.0930252075195, 'tag': {'en': 'sky'}}, {'confidence': 36.1794738769531, 'tag': {'en': 'forest'}}, {'confidence': 32.620491027832, 'tag': {'en': 'canyon'}}, {'confidence': 31.0227203369141, 'tag': {'en': 'peak'}}, {'confidence': 29.4975547790527, 'tag': {'en': 'tree'}}, {'confidence': 28.9153327941895, 'tag': {'en': 'glacier'}}, {'confidence': 28.8693199157715, 'tag': {'en': 'highland'}}, {'confidence': 28.0894603729248, 'tag': {'en': 'park'}}, {'confidence': 28.0584278106689, 'tag': {'en': 'environment'}}, {'confidence': 27.9807891845703, 'tag': {'en': 'clouds'}}, {'confidence': 27.6590881347656, 'tag': {'en': 'trees'}}, {'confidence': 26.2398223876953, 'tag': {'en': 'scenery'}}, {'confidence': 25.7238502502441, 'tag': {'en': 'wilderness'}}, {'confidence': 25.4575042724609, 'tag': {'en': 'national'}}, {'confidence': 25.4307708740234, 'tag': {'en': 'travel'}}, {'confidence': 24.3771286010742, 'tag': {'en': 'lake'}}, {'confidence': 22.459602355957, 'tag': {'en': 'cloud'}}, {'confidence': 21.6370964050293, 'tag': {'en': 'ravine'}}, {'confidence': 20.8236312866211, 'tag': {'en': 'river'}}, {'confidence': 20.7104454040527, 'tag': {'en': 'outdoor'}}, {'confidence': 20.6928176879883, 'tag': {'en': 'tourism'}}, {'confidence': 20.2213516235352, 'tag': {'en': 'outdoors'}}, {'confidence': 20.0387878417969, 'tag': {'en': 'rock'}}, {'confidence': 19.9951915740967, 'tag': {'en': 'high'}}, {'confidence': 18.796459197998, 'tag': {'en': 'hill'}}, {'confidence': 18.6174583435059, 'tag': {'en': 'stone'}}, {'confidence': 18.4902687072754, 'tag': {'en': 'scenic'}}, {'confidence': 18.169038772583, 'tag': {'en': 'panorama'}}, {'confidence': 18.0738315582275, 'tag': {'en': 'water'}}, {'confidence': 18.0638084411621, 'tag': {'en': 'summer'}}, {'confidence': 17.4524574279785, 'tag': {'en': 'grass'}}, {'confidence': 17.3154010772705, 'tag': {'en': 'alp'}}, {'confidence': 16.6003246307373, 'tag': {'en': 'wild'}}, {'confidence': 15.4410791397095, 'tag': {'en': 'hiking'}}, {'confidence': 15.3681907653809, 'tag': {'en': 'winter'}}, {'confidence': 15.2620115280151, 'tag': {'en': 'natural depression'}}, {'confidence': 14.7239580154419, 'tag': {'en': 'ice'}}, {'confidence': 13.8201217651367, 'tag': {'en': 'sunny'}}, {'confidence': 13.591459274292, 'tag': {'en': 'rocky'}}, {'confidence': 13.2374238967896, 'tag': {'en': 'serene'}}, {'confidence': 12.4818162918091, 'tag': {'en': 'country'}}, {'confidence': 12.1370334625244, 'tag': {'en': 'cliff'}}, {'confidence': 12.0068044662476, 'tag': {'en': 'geological formation'}}, {'confidence': 11.8053112030029, 'tag': {'en': 'tranquil'}}, {'confidence': 11.7643260955811, 'tag': {'en': 'mount'}}, {'confidence': 11.6741886138916, 'tag': {'en': 'hills'}}, {'confidence': 11.4103174209595, 'tag': {'en': 'natural'}}, {'confidence': 11.2925844192505, 'tag': {'en': 'cloudy'}}, {'confidence': 11.2861051559448, 'tag': {'en': 'scene'}}, {'confidence': 11.0197696685791, 'tag': {'en': 'peaceful'}}, {'confidence': 10.6718215942383, 'tag': {'en': 'vacation'}}, {'confidence': 10.6405200958252, 'tag': {'en': 'majestic'}}, {'confidence': 10.3931703567505, 'tag': {'en': 'rocks'}}, {'confidence': 10.3367805480957, 'tag': {'en': 'sunshine'}}, {'confidence': 10.2374467849731, 'tag': {'en': 'spring'}}, {'confidence': 10.1873979568481, 'tag': {'en': 'top'}}, {'confidence': 10.1135873794556, 'tag': {'en': 'ecology'}}, {'confidence': 10.085186958313, 'tag': {'en': 'reflection'}}, {'confidence': 9.859694480896, 'tag': {'en': 'ridge'}}, {'confidence': 8.90179538726807, 'tag': {'en': 'highlands'}}, {'confidence': 8.89572334289551, 'tag': {'en': 'peaks'}}, {'confidence': 8.88359069824219, 'tag': {'en': 'sun'}}, {'confidence': 8.88012790679932, 'tag': {'en': 'altitude'}}, {'confidence': 8.83828258514404, 'tag': {'en': 'alpine'}}, {'confidence': 8.81401443481445, 'tag': {'en': 'autumn'}}, {'confidence': 8.79794502258301, 'tag': {'en': 'hike'}}, {'confidence': 8.78051376342773, 'tag': {'en': 'snowy'}}, {'confidence': 8.78024101257324, 'tag': {'en': 'stream'}}, {'confidence': 8.63770484924316, 'tag': {'en': 'cold'}}, {'confidence': 8.4454460144043, 'tag': {'en': 'destination'}}, {'confidence': 8.29446887969971, 'tag': {'en': 'pine'}}, {'confidence': 8.26028537750244, 'tag': {'en': 'calm'}}, {'confidence': 8.23568248748779, 'tag': {'en': 'land'}}, {'confidence': 7.87502527236938, 'tag': {'en': 'trekking'}}, {'confidence': 7.82591676712036, 'tag': {'en': 'landscapes'}}, {'confidence': 7.69329357147217, 'tag': {'en': 'bush'}}, {'confidence': 7.67260599136353, 'tag': {'en': 'scenics'}}, {'confidence': 7.61185026168823, 'tag': {'en': 'adventure'}}, {'confidence': 7.5929708480835, 'tag': {'en': 'conservation'}}, {'confidence': 7.55560970306396, 'tag': {'en': 'field'}}, {'confidence': 7.22953319549561, 'tag': {'en': 'horizon'}}, {'confidence': 7.14070987701416, 'tag': {'en': 'basin'}}, {'confidence': 7.03749561309814, 'tag': {'en': 'season'}}]}, 'status': {'text': '', 'type': 'success'}}
    tag = 'fire'

    assert expected_confidence == get_tag_confidence(api_response, tag)



def get_tag_confidence(api_response, tag):
    #iterate over all available tags in api_response
    #hold current confidence and tag
    #return confidence for specified tag
    print (api_response['result']['tags'][0])
    for tag_entry in api_response['result']['tags']:
        confidence = tag_entry['confidence']
        confidence_tag = tag_entry['tag']['en']
        if confidence_tag == tag:
            return confidence
    return 0
